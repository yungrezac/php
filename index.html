<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>MiniApp</title>
  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Ionicons -->
  <script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
  <script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>
  <!-- Supabase JS -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <!-- Telegram WebApp API -->
  <script src="https://telegram.org/js/telegram-webapp.js"></script>
  <style>
    /* Общие стили, анимации и кастомизация скроллбара */
    .fade-in { animation: fadeIn 0.3s ease-in-out; }
    @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    .slide-up { animation: slideUp 0.3s ease-out; }
    @keyframes slideUp { from { transform: translateY(20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
    .pulse { animation: pulse 2s infinite; }
    @keyframes pulse {
      0% { box-shadow: 0 0 0 0 rgba(59,130,246,0.4); }
      70% { box-shadow: 0 0 0 10px rgba(59,130,246,0); }
      100% { box-shadow: 0 0 0 0 rgba(59,130,246,0); }
    }
    .smooth-transition { transition: all 0.3s ease; }
    ::-webkit-scrollbar { width: 6px; height: 6px; }
    ::-webkit-scrollbar-track { background: #f1f1f1; }
    ::-webkit-scrollbar-thumb { background: #888; border-radius: 3px; }
    ::-webkit-scrollbar-thumb:hover { background: #555; }
    * { scrollbar-width: thin; scrollbar-color: #888 #f1f1f1; }
    /* Стили модальных окон */
    .modal {
      position: fixed;
      inset: 0;
      z-index: 50;
      background-color: rgba(0,0,0,0.5);
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 1rem;
    }
    .hidden { display: none; }
  </style>
</head>
<body class="bg-white text-black font-sans antialiased">
  <!-- Верхняя панель -->
  <div id="topBar" class="fixed top-0 left-0 w-full h-12 flex items-center justify-center border-b bg-white font-semibold text-gray-800 relative z-10 shadow-sm">
    <span id="topBarTitle">Заявки</span>
    <div id="notifIconWrapper" class="absolute right-4 cursor-pointer">
      <ion-icon name="notifications-outline" class="text-2xl text-gray-600 hover:text-blue-500 smooth-transition"></ion-icon>
      <span id="notifDot" class="absolute top-0 right-0 w-2 h-2 bg-red-500 rounded-full hidden"></span>
    </div>
    <div id="notifPanel" class="hidden absolute right-2 top-full mt-1 w-72 bg-white border border-gray-200 rounded-lg shadow-xl p-3 text-sm text-gray-700 z-20">
      <div class="flex justify-between items-center mb-2 pb-2 border-b">
        <h4 class="font-medium">Уведомления</h4>
        <button id="markAllAsReadBtn" class="text-blue-500 text-xs">Прочитать все</button>
      </div>
      <div id="notificationsList" class="space-y-3 max-h-80 overflow-y-auto"></div>
    </div>
  </div>

  <!-- Основные разделы (вкладки) -->
  <!-- Статьи (вывод полного контента) -->
  <div id="tabContent-articles" class="tabContent px-4 mt-12 pb-16 hidden">
    <div id="articlesList" class="space-y-3"></div>
    <div id="articlesLoading" class="flex justify-center py-4 hidden">
      <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"></div>
    </div>
  </div>

  <!-- Маркет -->
  <div id="tabContent-market" class="tabContent px-4 mt-12 pb-16 hidden">
    <div id="addTemplateCard" class="hidden border-2 border-dashed border-gray-400 rounded-lg p-4 flex items-center justify-center text-gray-600 mb-4 cursor-pointer hover:bg-gray-50 smooth-transition">
      <ion-icon name="add-circle-outline" class="text-2xl mr-2"></ion-icon>
      <span>Добавить шаблон</span>
    </div>
    <div class="flex mb-4 gap-2">
      <div class="relative flex-1">
        <input type="text" placeholder="Поиск шаблонов..." id="marketSearch" class="w-full border border-gray-300 rounded-lg px-4 py-2 pl-10 focus:outline-none focus:ring-2 focus:ring-blue-500 smooth-transition">
        <ion-icon name="search-outline" class="absolute left-3 top-3 text-gray-400 text-lg"></ion-icon>
      </div>
      <button id="filterTemplatesBtn" class="bg-gray-100 p-2 rounded-lg hover:bg-gray-200 smooth-transition">
        <ion-icon name="filter-outline" class="text-gray-600 text-lg"></ion-icon>
      </button>
    </div>
    <div id="marketFilters" class="hidden mb-4 p-3 bg-gray-50 rounded-lg">
      <div class="grid grid-cols-2 gap-3">
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Категория</label>
          <select id="templateCategoryFilter" class="w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500">
            <option value="all">Все</option>
            <option value="UI">UI шаблоны</option>
            <option value="functional">Функциональные</option>
            <option value="games">Игры</option>
            <option value="other">Другое</option>
          </select>
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Цена</label>
          <select id="templatePriceFilter" class="w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500">
            <option value="all">Любая</option>
            <option value="0-10">0-10 TON</option>
            <option value="10-50">10-50 TON</option>
            <option value="50+">50+ TON</option>
          </select>
        </div>
      </div>
      <div class="mt-3 flex justify-between">
        <button id="resetFiltersBtn" class="text-blue-500 text-sm hover:text-blue-700">Сбросить</button>
        <button id="applyFiltersBtn" class="bg-blue-500 text-white text-sm px-3 py-1 rounded-lg hover:bg-blue-600">Применить</button>
      </div>
    </div>
    <div id="templatesList" class="space-y-3"></div>
    <div id="templatesLoading" class="flex justify-center py-4 hidden">
      <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"></div>
    </div>
    <div id="noTemplatesMessage" class="hidden text-center py-8 text-gray-500">
      <ion-icon name="search-outline" class="text-3xl mb-2"></ion-icon>
      <p>Шаблонов не найдено</p>
      <button id="resetFiltersBtn2" class="text-blue-500 text-sm mt-2 hover:text-blue-700">Сбросить фильтры</button>
    </div>
  </div>

  <!-- Заявки -->
  <div id="tabContent-requests" class="tabContent px-4 mt-12 pb-16">
    <!-- Режим заказчика -->
    <div id="customerRequests">
      <button id="newRequestBtn" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-3 rounded-lg mb-4 w-full flex items-center justify-center smooth-transition pulse">
        <ion-icon name="add-outline" class="text-xl mr-2"></ion-icon>
        <span>Новая заявка</span>
      </button>
      <div id="customerRequestsList" class="space-y-3"></div>
      <div id="noCustomerRequests" class="hidden text-center py-8 text-gray-500">
        <ion-icon name="clipboard-outline" class="text-3xl mb-2"></ion-icon>
        <p>У вас пока нет заявок</p>
        <button id="createRequestBtn" class="text-blue-500 text-sm mt-2 hover:text-blue-700">Создать заявку</button>
      </div>
    </div>
    <!-- Режим разработчика -->
    <div id="developerRequests" class="hidden">
      <div class="flex mb-4 gap-2">
        <div class="relative flex-1">
          <input type="text" placeholder="Поиск заявок..." id="requestSearch" class="w-full border border-gray-300 rounded-lg px-4 py-2 pl-10 focus:outline-none focus:ring-2 focus:ring-blue-500 smooth-transition">
          <ion-icon name="search-outline" class="absolute left-3 top-3 text-gray-400 text-lg"></ion-icon>
        </div>
        <button id="filterRequestsBtn" class="bg-gray-100 p-2 rounded-lg hover:bg-gray-200 smooth-transition">
          <ion-icon name="filter-outline" class="text-gray-600 text-lg"></ion-icon>
        </button>
      </div>
      <div id="requestFilters" class="hidden mb-4 p-3 bg-gray-50 rounded-lg">
        <div class="grid grid-cols-2 gap-3">
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">Бюджет</label>
            <select id="requestBudgetFilter" class="w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500">
              <option value="all">Любой</option>
              <option value="0-50">0-50 TON</option>
              <option value="50-100">50-100 TON</option>
              <option value="100+">100+ TON</option>
            </select>
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">Срок</label>
            <select id="requestDeadlineFilter" class="w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500">
              <option value="all">Любой</option>
              <option value="1-3">1-3 дня</option>
              <option value="3-7">3-7 дней</option>
              <option value="7+">7+ дней</option>
            </select>
          </div>
        </div>
        <div class="mt-3 flex justify-between">
          <button id="resetRequestFiltersBtn" class="text-blue-500 text-sm hover:text-blue-700">Сбросить</button>
          <button id="applyRequestFiltersBtn" class="bg-blue-500 text-white text-sm px-3 py-1 rounded-lg hover:bg-blue-600">Применить</button>
        </div>
      </div>
      <div id="developerRequestsList" class="space-y-3"></div>
      <div id="noDeveloperRequests" class="hidden text-center py-8 text-gray-500">
        <ion-icon name="clipboard-outline" class="text-3xl mb-2"></ion-icon>
        <p>Нет доступных заявок</p>
        <button id="refreshRequestsBtn" class="text-blue-500 text-sm mt-2 hover:text-blue-700">Обновить</button>
      </div>
    </div>
  </div>

  <!-- Профиль -->
  <div id="tabContent-profile" class="tabContent px-4 mt-12 pb-16 hidden">
    <div class="bg-gray-100 rounded-lg p-4 mb-4 flex items-center">
      <div id="profileAvatar" class="w-16 h-16 rounded-full flex items-center justify-center text-white text-2xl font-bold mr-4 bg-blue-500">П</div>
      <div>
        <div id="profileName" class="text-lg font-semibold">Пользователь</div>
        <div id="profileUsername" class="text-sm text-gray-600"></div>
        <div id="profileRating" class="flex items-center mt-1">
          <div id="ratingStars" class="flex text-yellow-400 text-sm">
            <ion-icon name="star"></ion-icon>
            <ion-icon name="star"></ion-icon>
            <ion-icon name="star"></ion-icon>
            <ion-icon name="star"></ion-icon>
            <ion-icon name="star-half"></ion-icon>
          </div>
          <span id="ratingText" class="text-xs text-gray-500 ml-1">4.8 (12 отзывов)</span>
        </div>
      </div>
    </div>
    <!-- Переключение ролей -->
    <div id="roleSection" class="mb-4">
      <button id="switchRoleBtn" class="w-full bg-gray-300 hover:bg-gray-400 text-gray-800 px-4 py-2 rounded">Переключить роль</button>
    </div>
    <!-- Пополнение баланса для заказчика -->
    <div id="balanceSection" class="mb-4">
      <div class="text-center">
        <div class="text-lg font-semibold">Ваш баланс: <span id="userBalance">0 TON</span></div>
        <button id="topUpBalanceBtn" class="mt-2 bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded">Пополнить баланс</button>
      </div>
    </div>
    <!-- Дополнительные элементы профиля -->
    <div class="flex justify-around mt-4">
      <button id="settingsBtn" class="px-4 py-2 bg-gray-200 rounded-md">Настройки</button>
      <button id="helpBtn" class="px-4 py-2 bg-gray-200 rounded-md">Помощь</button>
      <button id="aboutBtn" class="px-4 py-2 bg-gray-200 rounded-md">О приложении</button>
    </div>
    <button id="editProfileBtn" class="w-full bg-gray-200 hover:bg-gray-300 text-gray-800 py-2 rounded-md mt-4">Редактировать профиль</button>
    <div class="grid grid-cols-2 gap-3 mt-4">
      <div class="bg-blue-50 p-3 rounded-lg">
        <div class="text-xs text-blue-600 mb-1">Завершено заказов</div>
        <div id="completedOrders" class="text-xl font-semibold">0</div>
      </div>
      <div class="bg-green-50 p-3 rounded-lg">
        <div class="text-xs text-green-600 mb-1">Заработано</div>
        <div id="earnedAmount" class="text-xl font-semibold">0 TON</div>
      </div>
      <div class="bg-purple-50 p-3 rounded-lg">
        <div class="text-xs text-purple-600 mb-1">Шаблонов продано</div>
        <div id="templatesSold" class="text-xl font-semibold">0</div>
      </div>
      <div class="bg-yellow-50 p-3 rounded-lg">
        <div class="text-xs text-yellow-600 mb-1">Рейтинг</div>
        <div id="userRating" class="text-xl font-semibold">0</div>
      </div>
    </div>
    <div>
      <h3 class="font-medium mb-2">История операций</h3>
      <ul id="historyList" class="text-sm text-gray-700 space-y-3"></ul>
      <button id="loadMoreHistory" class="w-full text-center text-blue-500 text-sm py-2 hover:text-blue-700 smooth-transition hidden">Показать еще</button>
    </div>
  </div>

  <!-- Чат-оверлей -->
  <div id="chatOverlay" class="hidden fixed inset-0 z-50 flex flex-col bg-white">
    <div class="h-12 flex items-center border-b px-4 bg-white sticky top-0 z-10">
      <button id="closeChatBtn" class="mr-2">
        <ion-icon name="chevron-back-outline" class="text-2xl text-blue-600"></ion-icon>
      </button>
      <div id="chatRequestTitle" class="flex-1 font-medium truncate">Заявка</div>
      <button id="chatRequestActionBtn" class="text-blue-600 text-sm font-medium hover:text-blue-800 hidden"></button>
    </div>
    <div id="chatMessages" class="flex-1 overflow-y-auto px-4 py-2 space-y-3"></div>
    <div class="border-t p-3 flex items-center bg-white sticky bottom-0">
      <div class="relative">
        <button id="attachFileBtn" class="text-gray-500 hover:text-gray-700 mr-2 smooth-transition">
          <ion-icon name="attach-outline" class="text-xl"></ion-icon>
        </button>
        <div id="attachmentOptions" class="hidden absolute bottom-full left-0 mb-2 w-48 bg-white rounded-lg shadow-lg p-2 z-20">
          <button class="w-full text-left px-3 py-2 text-sm hover:bg-gray-100 rounded-lg smooth-transition">
            <ion-icon name="image-outline" class="mr-2"></ion-icon> Фото
          </button>
          <button class="w-full text-left px-3 py-2 text-sm hover:bg-gray-100 rounded-lg smooth-transition">
            <ion-icon name="document-outline" class="mr-2"></ion-icon> Файл
          </button>
          <button class="w-full text-left px-3 py-2 text-sm hover:bg-gray-100 rounded-lg smooth-transition">
            <ion-icon name="location-outline" class="mr-2"></ion-icon> Местоположение
          </button>
        </div>
      </div>
      <input id="chatInput" type="text" class="flex-1 border border-gray-300 rounded-full px-4 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 smooth-transition" placeholder="Написать сообщение...">
      <button id="chatSendBtn" class="ml-2 text-blue-600 font-semibold text-sm hover:text-blue-800 smooth-transition">Отправить</button>
    </div>
  </div>

  <!-- Модальное окно создания заявки -->
  <div id="addRequestModal" class="modal hidden">
    <div class="bg-white rounded-lg w-full max-w-md p-6 slide-up max-h-[90vh] overflow-y-auto">
      <div class="flex justify-between items-center mb-4">
        <h3 class="text-lg font-semibold">Новая заявка</h3>
        <button id="closeRequestModalBtn" class="text-gray-500 hover:text-gray-700">
          <ion-icon name="close-outline" class="text-xl"></ion-icon>
        </button>
      </div>
      <div class="space-y-4">
        <div>
          <label for="requestTitle" class="block text-sm font-medium text-gray-700 mb-1">Название заявки*</label>
          <input type="text" id="requestTitle" class="w-full border border-gray-300 rounded-lg px-4 py-2">
        </div>
        <div>
          <label for="requestDescription" class="block text-sm font-medium text-gray-700 mb-1">Описание*</label>
          <textarea id="requestDescription" rows="4" class="w-full border border-gray-300 rounded-lg px-4 py-2"></textarea>
        </div>
        <div>
          <label for="requestBudget" class="block text-sm font-medium text-gray-700 mb-1">Бюджет (TON)*</label>
          <input type="number" id="requestBudget" min="1" class="w-full border border-gray-300 rounded-lg px-4 py-2">
          <div class="text-xs text-gray-500 mt-1">К оплате: бюджет + 5%</div>
        </div>
        <div>
          <label for="requestDeadline" class="block text-sm font-medium text-gray-700 mb-1">Срок выполнения*</label>
          <select id="requestDeadline" class="w-full border border-gray-300 rounded-lg px-4 py-2">
            <option value="1">1 день</option>
            <option value="3">3 дня</option>
            <option value="7" selected>7 дней</option>
            <option value="14">14 дней</option>
            <option value="custom">Другой срок</option>
          </select>
          <div id="customDeadlineContainer" class="hidden mt-2">
            <input type="number" id="customDeadline" min="1" placeholder="Укажите количество дней" class="w-full border border-gray-300 rounded-lg px-4 py-2">
          </div>
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Прикрепленные файлы (до 3)</label>
          <div id="fileUploadArea" class="border-2 border-dashed border-gray-300 rounded-lg p-4 text-center cursor-pointer hover:bg-gray-50">
            <ion-icon name="cloud-upload-outline" class="text-2xl text-gray-400 mb-1"></ion-icon>
            <p class="text-sm text-gray-500">Нажмите для загрузки файлов</p>
            <p id="requestFilesNames" class="text-xs text-gray-400 mt-2 hidden"></p>
          </div>
          <input type="file" id="requestFiles" class="hidden" multiple>
        </div>
      </div>
      <div class="flex justify-end space-x-3 mt-6">
        <button id="cancelRequestBtn" class="px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50">Отмена</button>
        <button id="submitRequestBtn" class="px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600">Создать заявку</button>
      </div>
    </div>
  </div>

  <!-- Модальное окно добавления шаблона -->
  <div id="addTemplateModal" class="modal hidden">
    <div class="bg-white rounded-lg w-full max-w-md p-6 slide-up max-h-[90vh] overflow-y-auto">
      <div class="flex justify-between items-center mb-4">
        <h3 class="text-lg font-semibold">Добавить шаблон</h3>
        <button id="closeTemplateModalBtn" class="text-gray-500 hover:text-gray-700">
          <ion-icon name="close-outline" class="text-xl"></ion-icon>
        </button>
      </div>
      <div class="space-y-4">
        <div>
          <label for="templateTitle" class="block text-sm font-medium text-gray-700 mb-1">Название шаблона*</label>
          <input type="text" id="templateTitle" class="w-full border border-gray-300 rounded-lg px-4 py-2">
        </div>
        <div>
          <label for="templateDescription" class="block text-sm font-medium text-gray-700 mb-1">Описание*</label>
          <textarea id="templateDescription" rows="4" class="w-full border border-gray-300 rounded-lg px-4 py-2"></textarea>
        </div>
        <div>
          <label for="templatePrice" class="block text-sm font-medium text-gray-700 mb-1">Цена (TON)*</label>
          <input type="number" id="templatePrice" min="0" step="0.1" class="w-full border border-gray-300 rounded-lg px-4 py-2">
          <div class="text-xs text-gray-500 mt-1">При размещении добавляется +5% к цене</div>
        </div>
        <div>
          <label for="templateCategory" class="block text-sm font-medium text-gray-700 mb-1">Категория*</label>
          <select id="templateCategory" class="w-full border border-gray-300 rounded-lg px-4 py-2">
            <option value="UI">UI шаблоны</option>
            <option value="functional">Функциональные</option>
            <option value="games">Игры</option>
            <option value="other">Другое</option>
          </select>
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Файл шаблона (ZIP)*</label>
          <button id="templateFileUpload" class="w-full border-2 border-dashed border-gray-300 rounded-lg p-4 text-center cursor-pointer hover:bg-gray-50">
            <ion-icon name="document-outline" class="text-2xl text-gray-400 mb-1"></ion-icon>
            <p class="text-sm text-gray-500">Загрузите ZIP-архив с шаблоном</p>
            <p id="templateFileName" class="text-xs text-gray-400 mt-2 hidden"></p>
          </button>
          <input type="file" id="templateFile" class="hidden" accept=".zip">
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Превью (изображение)</label>
          <button id="templatePreviewUpload" class="w-full border-2 border-dashed border-gray-300 rounded-lg p-4 text-center cursor-pointer hover:bg-gray-50">
            <ion-icon name="image-outline" class="text-2xl text-gray-400 mb-1"></ion-icon>
            <p class="text-sm text-gray-500">Загрузите изображение для превью</p>
            <p id="templatePreviewName" class="text-xs text-gray-400 mt-2 hidden"></p>
          </button>
          <input type="file" id="templatePreview" class="hidden" accept="image/*">
        </div>
      </div>
      <div class="flex justify-end space-x-3 mt-6">
        <button id="cancelTemplateBtn" class="px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50">Отмена</button>
        <button id="submitTemplateBtn" class="px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600">Отправить на модерацию</button>
      </div>
    </div>
  </div>

  <!-- Модальное окно настроек -->
  <div id="settingsModal" class="modal hidden">
    <div class="bg-white rounded-lg w-full max-w-md p-6 slide-up">
      <div class="flex justify-between items-center mb-4">
        <h3 class="text-lg font-semibold">Настройки</h3>
        <button id="closeSettingsBtn" class="text-gray-500 hover:text-gray-700">
          <ion-icon name="close-outline" class="text-xl"></ion-icon>
        </button>
      </div>
      <div class="space-y-4">
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">Тема</label>
          <div class="grid grid-cols-3 gap-3">
            <button id="themeLight" class="border rounded-lg p-3 text-center hover:bg-gray-50">
              <ion-icon name="sunny-outline" class="text-xl mb-1"></ion-icon>
              <p class="text-xs">Светлая</p>
            </button>
            <button id="themeDark" class="border rounded-lg p-3 text-center hover:bg-gray-50">
              <ion-icon name="moon-outline" class="text-xl mb-1"></ion-icon>
              <p class="text-xs">Темная</p>
            </button>
            <button id="themeSystem" class="border rounded-lg p-3 text-center hover:bg-gray-50">
              <ion-icon name="desktop-outline" class="text-xl mb-1"></ion-icon>
              <p class="text-xs">Системная</p>
            </button>
          </div>
        </div>
        <div>
          <label for="languageSelect" class="block text-sm font-medium text-gray-700 mb-1">Язык</label>
          <select id="languageSelect" class="w-full border border-gray-300 rounded-lg px-4 py-2">
            <option value="ru">Русский</option>
            <option value="en">English</option>
          </select>
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">Уведомления</label>
          <div class="space-y-2">
            <label class="flex items-center">
              <input type="checkbox" id="notifMessages" class="mr-2 rounded text-blue-500" checked>
              <span class="text-sm">Сообщения в чате</span>
            </label>
            <label class="flex items-center">
              <input type="checkbox" id="notifRequests" class="mr-2 rounded text-blue-500" checked>
              <span class="text-sm">Обновления заявок</span>
            </label>
            <label class="flex items-center">
              <input type="checkbox" id="notifNews" class="mr-2 rounded text-blue-500">
              <span class="text-sm">Новости и обновления</span>
            </label>
          </div>
        </div>
      </div>
      <div class="flex justify-end mt-6">
        <button id="saveSettingsBtn" class="px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600">Сохранить</button>
      </div>
    </div>
  </div>

  <!-- Модальное окно помощи -->
  <div id="helpModal" class="modal hidden">
    <div class="bg-white rounded-lg w-full max-w-md p-6 slide-up">
      <div class="flex justify-between items-center mb-4">
        <h3 class="text-lg font-semibold">Помощь</h3>
        <button id="closeHelpBtn" class="text-gray-500 hover:text-gray-700">
          <ion-icon name="close-outline" class="text-xl"></ion-icon>
        </button>
      </div>
      <div class="space-y-4">
        <div>
          <h4 class="font-medium mb-2">Как создать заявку?</h4>
          <p class="text-sm text-gray-600">Перейдите в раздел "Заявки", заполните форму (бюджет + 5% списывается с баланса) и нажмите "Создать заявку".</p>
        </div>
        <div>
          <h4 class="font-medium mb-2">Как пополнить баланс?</h4>
          <p class="text-sm text-gray-600">В разделе "Профиль" нажмите кнопку "Пополнить баланс" и следуйте инструкциям через Cryptobot.</p>
        </div>
        <div>
          <h4 class="font-medium mb-2">Как разместить шаблон?</h4>
          <p class="text-sm text-gray-600">Переключитесь в режим разработчика, затем в разделе "Маркет" нажмите "Добавить шаблон". При размещении цена увеличивается на 5%.</p>
        </div>
      </div>
      <div class="flex justify-end mt-6">
        <button id="closeHelpBtn2" class="px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600">Закрыть</button>
      </div>
    </div>
  </div>

  <!-- Модальное окно "О приложении" -->
  <div id="aboutModal" class="modal hidden">
    <div class="bg-white rounded-lg w-full max-w-md p-6 slide-up">
      <div class="flex justify-between items-center mb-4">
        <h3 class="text-lg font-semibold">О приложении</h3>
        <button id="closeAboutBtn" class="text-gray-500 hover:text-gray-700">
          <ion-icon name="close-outline" class="text-xl"></ion-icon>
        </button>
      </div>
      <div class="space-y-4">
        <div class="flex justify-center">
          <div class="w-16 h-16 bg-blue-500 rounded-full flex items-center justify-center text-white text-2xl font-bold">M</div>
        </div>
        <div class="text-center">
          <h4 class="font-medium">MiniApp</h4>
          <p class="text-sm text-gray-600">Версия 1.0.0</p>
        </div>
        <div>
          <p class="text-sm text-gray-600 text-center">Платформа для заказа и продажи шаблонов кода с интеграцией Cryptobot и Telegram</p>
        </div>
        <div class="pt-4 border-t">
          <p class="text-xs text-gray-500 text-center">© 2023 MiniApp. Все права защищены.</p>
        </div>
      </div>
      <div class="flex justify-end mt-6">
        <button id="closeAboutBtn2" class="px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600">Закрыть</button>
      </div>
    </div>
  </div>

  <!-- Модальное окно подтверждения -->
  <div id="confirmationModal" class="modal hidden">
    <div class="bg-white rounded-lg w-full max-w-md p-6 slide-up">
      <div class="flex justify-between items-center mb-4">
        <h3 id="confirmationTitle" class="text-lg font-semibold">Подтверждение</h3>
        <button id="cancelConfirmBtn" class="text-gray-500 hover:text-gray-700">
          <ion-icon name="close-outline" class="text-xl"></ion-icon>
        </button>
      </div>
      <div class="mb-6">
        <p id="confirmationMessage" class="text-gray-600">Вы уверены, что хотите выполнить это действие?</p>
      </div>
      <div class="flex justify-end space-x-3">
        <button id="cancelConfirmBtn2" class="px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50">Отмена</button>
        <button id="confirmActionBtn" class="px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600">Подтвердить</button>
      </div>
    </div>
  </div>

  <!-- Загрузочный оверлей -->
  <div id="loadingOverlay" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
    <div class="bg-white rounded-lg p-6 flex flex-col items-center">
      <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mb-4"></div>
      <div id="loadingMessage" class="text-gray-800">Загрузка...</div>
    </div>
  </div>

  <!-- Нижняя навигация -->
  <div id="bottomNav" class="fixed bottom-0 left-0 w-full h-14 border-t bg-white flex justify-around items-center z-10 shadow-sm">
    <button id="tab-articles" class="flex flex-col items-center justify-center flex-1 h-full smooth-transition">
      <ion-icon id="tab-icon-articles" name="document-text-outline" class="text-2xl text-gray-600 mb-1"></ion-icon>
      <span class="text-xs text-gray-600">Статьи</span>
    </button>
    <button id="tab-market" class="flex flex-col items-center justify-center flex-1 h-full smooth-transition">
      <ion-icon id="tab-icon-market" name="pricetag-outline" class="text-2xl text-gray-600 mb-1"></ion-icon>
      <span class="text-xs text-gray-600">Маркет</span>
    </button>
    <button id="tab-requests" class="flex flex-col items-center justify-center flex-1 h-full smooth-transition">
      <ion-icon id="tab-icon-requests" name="clipboard-outline" class="text-2xl text-blue-600 mb-1"></ion-icon>
      <span class="text-xs text-blue-600">Заявки</span>
    </button>
    <button id="tab-profile" class="flex flex-col items-center justify-center flex-1 h-full smooth-transition">
      <ion-icon id="tab-icon-profile" name="person-outline" class="text-2xl text-gray-600 mb-1"></ion-icon>
      <span class="text-xs text-gray-600">Профиль</span>
    </button>
  </div>

  <!-- Подключение основного модуля приложения -->
  <script type="module" src="js/app.js"></script>
</body>
</html>
